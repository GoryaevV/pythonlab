<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PythonLab | –í—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		:root {
			--primary-blue: #2c82c9;
			--accent-teal: #20bf6b;
			--accent-orange: #fa8231;
			--dark-gray: #2c3e50;
			--steel-gray: #7f8c8d;
			--light-gray: #ecf0f1;
			--border-color: #dfe6e9;
			--error-color: #e74c3c;
			--success-color: #27ae60;
		}
		
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}
		
		body {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 20px;
		}
		
		.auth-container {
			width: 100%;
			max-width: 1200px;
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 30px;
			background: white;
			border-radius: 20px;
			overflow: hidden;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
		}
		
		.welcome-side {
			background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
			color: white;
			padding: 60px 40px;
			display: flex;
			flex-direction: column;
			justify-content: center;
		}
		
		.logo {
			display: flex;
			align-items: center;
			gap: 15px;
			margin-bottom: 30px;
		}
		
		.logo-icon {
			font-size: 2.5rem;
		}
		
		.logo-text {
			font-size: 2rem;
			font-weight: 700;
		}
		
		.welcome-title {
			font-size: 2.2rem;
			margin-bottom: 20px;
			line-height: 1.3;
		}
		
		.welcome-subtitle {
			font-size: 1.1rem;
			opacity: 0.9;
			margin-bottom: 30px;
			line-height: 1.6;
		}
		
		.features {
			margin-top: 40px;
		}
		
		.feature {
			display: flex;
			align-items: center;
			gap: 15px;
			margin-bottom: 20px;
		}
		
		.feature-icon {
			background: rgba(255, 255, 255, 0.2);
			width: 40px;
			height: 40px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.auth-side {
			padding: 60px 40px;
		}
		
		.auth-tabs {
			display: flex;
			border-bottom: 2px solid var(--light-gray);
			margin-bottom: 30px;
		}
		
		.auth-tab {
			flex: 1;
			text-align: center;
			padding: 15px;
			font-size: 1.1rem;
			font-weight: 600;
			cursor: pointer;
			color: var(--steel-gray);
			border-bottom: 2px solid transparent;
			transition: all 0.3s;
		}
		
		.auth-tab.active {
			color: var(--primary-blue);
			border-bottom-color: var(--primary-blue);
		}
		
		.auth-content {
			display: none;
		}
		
		.auth-content.active {
			display: block;
		}
		
		.form-title {
			font-size: 1.8rem;
			color: var(--dark-gray);
			margin-bottom: 10px;
		}
		
		.form-subtitle {
			color: var(--steel-gray);
			margin-bottom: 30px;
		}
		
		.form-group {
			margin-bottom: 20px;
		}
		
		.form-label {
			display: block;
			margin-bottom: 8px;
			font-weight: 500;
			color: var(--dark-gray);
		}
		
		.form-input {
			width: 100%;
			padding: 15px;
			border: 2px solid var(--border-color);
			border-radius: 10px;
			font-size: 1rem;
			transition: all 0.3s;
		}
		
		.form-input:focus {
			outline: none;
			border-color: var(--primary-blue);
			box-shadow: 0 0 0 3px rgba(44, 130, 201, 0.2);
		}
		
		.form-input.error {
			border-color: var(--error-color);
		}
		
		.error-message {
			color: var(--error-color);
			font-size: 0.9rem;
			margin-top: 5px;
			display: none;
		}
		
		.error-message.show {
			display: block;
		}
		
		.password-toggle {
			position: relative;
		}
		
		.toggle-password {
			position: absolute;
			right: 15px;
			top: 50%;
			transform: translateY(-50%);
			background: none;
			border: none;
			color: var(--steel-gray);
			cursor: pointer;
		}
		
		.role-selector {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 15px;
			margin-bottom: 20px;
		}
		
		.role-option {
			border: 2px solid var(--border-color);
			border-radius: 10px;
			padding: 20px;
			text-align: center;
			cursor: pointer;
			transition: all 0.3s;
		}
		
		.role-option:hover {
			border-color: var(--primary-blue);
			background: rgba(44, 130, 201, 0.05);
		}
		
		.role-option.selected {
			border-color: var(--primary-blue);
			background: rgba(44, 130, 201, 0.1);
		}
		
		.role-icon {
			font-size: 2rem;
			margin-bottom: 10px;
			color: var(--steel-gray);
		}
		
		.role-option.selected .role-icon {
			color: var(--primary-blue);
		}
		
		.role-student.selected .role-icon {
			color: var(--primary-blue);
		}
		
		.role-teacher.selected .role-icon {
			color: var(--accent-orange);
		}
		
		.btn {
			width: 100%;
			padding: 16px;
			border: none;
			border-radius: 10px;
			font-size: 1.1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
		}
		
		.btn-primary {
			background: var(--primary-blue);
			color: white;
		}
		
		.btn-primary:hover {
			background: #1a6fb3;
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
		}
		
		.btn-secondary {
			background: var(--light-gray);
			color: var(--dark-gray);
			border: 2px solid var(--border-color);
		}
		
		.btn-secondary:hover {
			background: #e0e6eb;
		}
		
		.test-users {
			margin-top: 30px;
			padding: 20px;
			background: var(--light-gray);
			border-radius: 10px;
		}
		
		.test-users-title {
			font-weight: 600;
			margin-bottom: 15px;
			color: var(--dark-gray);
		}
		
		.test-user {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 10px 0;
			border-bottom: 1px solid var(--border-color);
		}
		
		.test-user:last-child {
			border-bottom: none;
		}
		
		.test-user-info {
			flex: 1;
		}
		
		.test-user-email {
			font-weight: 500;
		}
		
		.test-user-role {
			font-size: 0.9rem;
			color: var(--steel-gray);
		}
		
		.quick-login-btn {
			background: var(--accent-teal);
			color: white;
			border: none;
			padding: 8px 15px;
			border-radius: 5px;
			cursor: pointer;
			font-size: 0.9rem;
			transition: background 0.3s;
		}
		
		.quick-login-btn:hover {
			background: #199d55;
		}
		
		.divider {
			text-align: center;
			margin: 30px 0;
			position: relative;
			color: var(--steel-gray);
		}
		
		.divider::before {
			content: '';
			position: absolute;
			left: 0;
			top: 50%;
			width: 45%;
			height: 1px;
			background: var(--border-color);
		}
		
		.divider::after {
			content: '';
			position: absolute;
			right: 0;
			top: 50%;
			width: 45%;
			height: 1px;
			background: var(--border-color);
		}
		
		.invitation-section {
			margin-top: 20px;
			padding: 15px;
			background: #e8f4fc;
			border-radius: 8px;
			border-left: 4px solid var(--primary-blue);
		}
		
		.invitation-label {
			font-weight: 500;
			margin-bottom: 8px;
			display: block;
		}
		
		.message {
			padding: 15px;
			border-radius: 8px;
			margin-bottom: 20px;
			display: none;
		}
		
		.message.success {
			background: #d4edda;
			color: #155724;
			border: 1px solid #c3e6cb;
			display: block;
		}
		
		.message.error {
			background: #f8d7da;
			color: #721c24;
			border: 1px solid #f5c6cb;
			display: block;
		}
		
		.message.info {
			background: #d1ecf1;
			color: #0c5460;
			border: 1px solid #bee5eb;
			display: block;
		}
		
		@media (max-width: 992px) {
			.auth-container {
				grid-template-columns: 1fr;
			}
			
			.welcome-side {
				padding: 40px 30px;
			}
		}
		
		@media (max-width: 576px) {
			body {
				padding: 10px;
			}
			
			.auth-container {
				border-radius: 15px;
			}
			
			.welcome-side,
			.auth-side {
				padding: 30px 20px;
			}
			
			.role-selector {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>
<body>
	<div class="auth-container">
		<!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
		<div class="welcome-side">
			<div class="logo">
				<i class="fas fa-code logo-icon"></i>
				<span class="logo-text">PythonLab</span>
			</div>
			
			<h1 class="welcome-title">
				–û–±—É—á–µ–Ω–∏–µ Python —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–ª–∞—Å—Å–æ–≤ –ø–æ –æ–±—Ä–∞–∑—Ü—É Stepik
			</h1>
			
			<p class="welcome-subtitle">
				–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é. 
				–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç –∫—É—Ä—Å—ã –∏ –∫–ª–∞—Å—Å—ã, —Å—Ç—É–¥–µ–Ω—Ç—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º.
			</p>
			
			<div class="features">
				<div class="feature">
					<div class="feature-icon">
						<i class="fas fa-chalkboard-teacher"></i>
					</div>
					<div>
						<h3>–î–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
						<p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫—É—Ä—Å—ã, —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–ª–∞—Å—Å–∞–º–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
					</div>
				</div>
				
				<div class="feature">
					<div class="feature-icon">
						<i class="fas fa-user-graduate"></i>
					</div>
					<div>
						<h3>–î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h3>
						<p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª–∞—Å—Å–∞–º, –∏–∑—É—á–∞–π—Ç–µ Python, –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ü–µ–Ω–∫–∏</p>
					</div>
				</div>
				
				<div class="feature">
					<div class="feature-icon">
						<i class="fas fa-chart-line"></i>
					</div>
					<div>
						<h3>–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
						<p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤</p>
					</div>
				</div>
			</div>
		</div>
		
		<!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –§–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
		<div class="auth-side">
			<!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
			<div id="message" class="message"></div>
			
			<!-- –í–∫–ª–∞–¥–∫–∏ -->
			<div class="auth-tabs">
				<div class="auth-tab active" onclick="switchAuthTab('login')">
					–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
				</div>
				<div class="auth-tab" onclick="switchAuthTab('register')">
					–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
				</div>
			</div>
			
			<!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
			<div id="login-form" class="auth-content active">
				<h2 class="form-title">–í—Ö–æ–¥ –≤ PythonLab</h2>
				<p class="form-subtitle">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞</p>
				
				<form id="loginForm" onsubmit="return false;">
					<div class="form-group">
						<label class="form-label">Email</label>
						<input type="email" 
								id="login-email" 
								class="form-input" 
								placeholder="–í–∞—à email" 
								required>
						<div id="login-email-error" class="error-message"></div>
					</div>
					
					<div class="form-group password-toggle">
						<label class="form-label">–ü–∞—Ä–æ–ª—å</label>
						<input type="password" 
								id="login-password" 
								class="form-input" 
								placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" 
								required>
						<button type="button" 
								class="toggle-password" 
								onclick="togglePassword('login-password')">
							<i class="fas fa-eye"></i>
						</button>
						<div id="login-password-error" class="error-message"></div>
					</div>
					
					<div class="form-group">
						<button type="submit" 
								class="btn btn-primary"
								onclick="submitLogin()">
							<i class="fas fa-sign-in-alt"></i>
							–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
						</button>
					</div>
				</form>
				
				<div class="divider">–ò–ª–∏ –≤–æ–π–¥–∏—Ç–µ –±—ã—Å—Ç—Ä–æ</div>
				
				<!-- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
				<div class="test-users">
					<div class="test-users-title">–¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏:</div>
					
					<div class="test-user">
						<div class="test-user-info">
							<div class="test-user-email">teacher@pythonlab.ru</div>
							<div class="test-user-role">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
						</div>
						<button class="quick-login-btn" onclick="quickLogin('teacher@pythonlab.ru', 'password123')">
							–ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥
						</button>
					</div>
					
					<div class="test-user">
						<div class="test-user-info">
							<div class="test-user-email">student@pythonlab.ru</div>
							<div class="test-user-role">–°—Ç—É–¥–µ–Ω—Ç</div>
						</div>
						<button class="quick-login-btn" onclick="quickLogin('student@pythonlab.ru', 'password123')">
							–ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥
						</button>
					</div>
				</div>
				
				<div style="text-align: center; margin-top: 20px;">
					<p style="color: var(--steel-gray);">
						–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
						<a href="#" 
							style="color: var(--primary-blue); font-weight: 500; text-decoration: none;"
							onclick="switchAuthTab('register')">
							–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
						</a>
					</p>
				</div>
			</div>
			
			<!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
			<div id="register-form" class="auth-content">
				<h2 class="form-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ PythonLab</h2>
				<p class="form-subtitle">–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å</p>
				
				<form id="registerForm" onsubmit="return false;">
					<div class="form-group">
						<label class="form-label">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label>
						<input type="text" 
								id="register-name" 
								class="form-input" 
								placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" 
								required>
						<div id="register-name-error" class="error-message"></div>
					</div>
					
					<div class="form-group">
						<label class="form-label">Email</label>
						<input type="email" 
								id="register-email" 
								class="form-input" 
								placeholder="example@email.com" 
								required>
						<div id="register-email-error" class="error-message"></div>
					</div>
					
					<div class="form-group password-toggle">
						<label class="form-label">–ü–∞—Ä–æ–ª—å</label>
						<input type="password" 
								id="register-password" 
								class="form-input" 
								placeholder="–ù–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤" 
								required>
						<button type="button" 
								class="toggle-password" 
								onclick="togglePassword('register-password')">
							<i class="fas fa-eye"></i>
						</button>
						<div id="register-password-error" class="error-message"></div>
					</div>
					
					<div class="form-group password-toggle">
						<label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
						<input type="password" 
								id="register-confirm-password" 
								class="form-input" 
								placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" 
								required>
						<button type="button" 
								class="toggle-password" 
								onclick="togglePassword('register-confirm-password')">
							<i class="fas fa-eye"></i>
						</button>
						<div id="register-confirm-error" class="error-message"></div>
					</div>
					
					<div class="form-group">
						<label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</label>
						<div class="role-selector">
							<div class="role-option role-student" 
									onclick="selectRole('student')">
								<div class="role-icon">
									<i class="fas fa-user-graduate"></i>
								</div>
								<div>
									<div style="font-weight: 600; margin-bottom: 5px;">–°—Ç—É–¥–µ–Ω—Ç</div>
									<div style="font-size: 0.9rem; color: var(--steel-gray);">
										–ò–∑—É—á–∞–π—Ç–µ –∫—É—Ä—Å—ã, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª–∞—Å—Å–∞–º
									</div>
								</div>
							</div>
							
							<div class="role-option role-teacher" 
									onclick="selectRole('teacher')">
								<div class="role-icon">
									<i class="fas fa-chalkboard-teacher"></i>
								</div>
								<div>
									<div style="font-weight: 600; margin-bottom: 5px;">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
									<div style="font-size: 0.9rem; color: var(--steel-gray);">
										–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫—É—Ä—Å—ã –∏ –∫–ª–∞—Å—Å—ã, —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ–±—É—á–µ–Ω–∏–µ–º
									</div>
								</div>
							</div>
						</div>
						<input type="hidden" id="register-role" value="student">
						<div id="register-role-error" class="error-message"></div>
					</div>
					
					<div class="invitation-section">
						<label class="invitation-label">
							<i class="fas fa-key"></i> –ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
						</label>
						<input type="text" 
								id="register-invite-code" 
								class="form-input" 
								placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è">
						<div style="font-size: 0.9rem; color: var(--steel-gray); margin-top: 8px;">
							–ï—Å–ª–∏ –≤–∞—Å –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –≤ –∫–ª–∞—Å—Å, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
						</div>
					</div>
					
					<div class="form-group" style="margin-top: 30px;">
						<button type="submit" 
								class="btn btn-primary"
								onclick="submitRegistration()">
							<i class="fas fa-user-plus"></i>
							–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
						</button>
					</div>
				</form>
				
				<div style="text-align: center; margin-top: 20px;">
					<p style="color: var(--steel-gray);">
						–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? 
						<a href="#" 
							style="color: var(--primary-blue); font-weight: 500; text-decoration: none;"
							onclick="switchAuthTab('login')">
							–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
						</a>
					</p>
				</div>
			</div>
		</div>
	</div>
	
	<script>
		const API_BASE = 'http://localhost:3001';
		let selectedRole = 'student';
		
		// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
		document.addEventListener('DOMContentLoaded', function() {
			// –í—ã–±–∏—Ä–∞–µ–º —Ä–æ–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
			selectRole('student');
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ localStorage
			const invitationCode = localStorage.getItem('invitation_code');
			if (invitationCode) {
				document.getElementById('register-invite-code').value = invitationCode;
				showMessage('–ù–∞–π–¥–µ–Ω –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è! –û–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.', 'info');
				localStorage.removeItem('invitation_code');
			}
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
			checkExistingSession();
			
			// –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ email –ø—Ä–∏ –≤—Ö–æ–¥–µ
			document.getElementById('login-email').focus();
		});
		
		// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
		function switchAuthTab(tab) {
			// –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
			document.querySelectorAll('.auth-tab').forEach(t => {
				t.classList.remove('active');
			});
			document.querySelectorAll('.auth-content').forEach(c => {
				c.classList.remove('active');
			});
			
			document.querySelector(`.auth-tab[onclick*="${tab}"]`).classList.add('active');
			document.getElementById(`${tab}-form`).classList.add('active');
			
			// –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
			clearMessages();
			
			// –ê–≤—Ç–æ—Ñ–æ–∫—É—Å
			if (tab === 'login') {
				document.getElementById('login-email').focus();
			} else {
				document.getElementById('register-name').focus();
			}
		}
		
		// –í—ã–±–æ—Ä —Ä–æ–ª–∏
		function selectRole(role) {
			selectedRole = role;
			document.getElementById('register-role').value = role;
			
			// –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ
			document.querySelectorAll('.role-option').forEach(option => {
				option.classList.remove('selected');
			});
			
			const selectedOption = document.querySelector(`.role-${role}`);
			selectedOption.classList.add('selected');
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å
		function togglePassword(inputId) {
			const input = document.getElementById(inputId);
			const icon = input.nextElementSibling.querySelector('i');
			
			if (input.type === 'password') {
				input.type = 'text';
				icon.classList.remove('fa-eye');
				icon.classList.add('fa-eye-slash');
			} else {
				input.type = 'password';
				icon.classList.remove('fa-eye-slash');
				icon.classList.add('fa-eye');
			}
		}
		
		// –ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥
		function quickLogin(email, password) {
			document.getElementById('login-email').value = email;
			document.getElementById('login-password').value = password;
			submitLogin();
		}
		
		// –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
		async function submitLogin() {
			clearMessages();
			clearErrors('login');
			
			const email = document.getElementById('login-email').value.trim().toLowerCase();
			const password = document.getElementById('login-password').value;
			
			// –í–∞–ª–∏–¥–∞—Ü–∏—è
			let isValid = true;
			
			if (!email) {
				showError('login-email', '–í–≤–µ–¥–∏—Ç–µ email');
				isValid = false;
			} else if (!isValidEmail(email)) {
				showError('login-email', '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
				isValid = false;
			}
			
			if (!password) {
				showError('login-password', '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
				isValid = false;
			}
			
			if (!isValid) return;
			
			// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
			const submitBtn = document.querySelector('#login-form .btn-primary');
			const originalText = submitBtn.innerHTML;
			submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –í—Ö–æ–¥...';
			submitBtn.disabled = true;
			
			try {
				const response = await fetch(`${API_BASE}/api/auth/login`, {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({
						email: email,
						password: password
					})
				});
				
				const data = await response.json();
				
				if (response.ok && data.success) {
					// –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
					localStorage.setItem('pythonlab_token', data.token);
					localStorage.setItem('pythonlab_user', JSON.stringify(data.user));
					
					showMessage(`‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${data.user.name}!`, 'success');
					
					// –ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
					setTimeout(() => {
						showMainInterface();
					}, 1500);
					
				} else {
					showMessage(`‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ${data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`, 'error');
					
					// –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
					if (data.error && data.error.includes('–ø–∞—Ä–æ–ª')) {
						showError('login-password', data.error);
					}
				}
				
			} catch (error) {
				console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
				showMessage(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
			} finally {
				// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
				submitBtn.innerHTML = originalText;
				submitBtn.disabled = false;
			}
		}
		
		// –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
		async function submitRegistration() {
			clearMessages();
			clearErrors('register');
			
			const name = document.getElementById('register-name').value.trim();
			const email = document.getElementById('register-email').value.trim().toLowerCase();
			const password = document.getElementById('register-password').value;
			const confirmPassword = document.getElementById('register-confirm-password').value;
			const role = selectedRole;
			const inviteCode = document.getElementById('register-invite-code').value.trim().toUpperCase();
			
			// –í–∞–ª–∏–¥–∞—Ü–∏—è
			let isValid = true;
			
			if (!name) {
				showError('register-name', '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é');
				isValid = false;
			}
			
			if (!email) {
				showError('register-email', '–í–≤–µ–¥–∏—Ç–µ email');
				isValid = false;
			} else if (!isValidEmail(email)) {
				showError('register-email', '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
				isValid = false;
			}
			
			if (!password) {
				showError('register-password', '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
				isValid = false;
			} else if (password.length < 6) {
				showError('register-password', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤');
				isValid = false;
			}
			
			if (!confirmPassword) {
				showError('register-confirm-password', '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
				isValid = false;
			} else if (password !== confirmPassword) {
				showError('register-confirm-password', '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
				isValid = false;
			}
			
			if (!role) {
				showError('register-role', '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å');
				isValid = false;
			}
			
			if (!isValid) return;
			
			// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
			const submitBtn = document.querySelector('#register-form .btn-primary');
			const originalText = submitBtn.innerHTML;
			submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...';
			submitBtn.disabled = true;
			
			try {
				const response = await fetch(`${API_BASE}/api/auth/register`, {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({
						name: name,
						email: email,
						password: password,
						role: role,
						invite_code: inviteCode || null
					})
				});
				
				const data = await response.json();
				
				if (response.ok && data.success) {
					showMessage(`‚úÖ ${data.message}`, 'success');
					
					// –ï—Å–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏–º
					if (data.user) {
						// –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
						localStorage.setItem('pythonlab_token', data.token);
						localStorage.setItem('pythonlab_user', JSON.stringify(data.user));
						
						setTimeout(() => {
							showMainInterface();
						}, 2000);
					} else {
						// –ï—Å–ª–∏ –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–æ–π—Ç–∏
						setTimeout(() => {
							showMessage(`–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É`, 'info');
							switchAuthTab('login');
							document.getElementById('login-email').value = email;
							document.getElementById('login-password').value = password;
						}, 1500);
					}
					
				} else {
					showMessage(`‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`, 'error');
					
					// –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
					if (data.error && data.error.includes('email')) {
						showError('register-email', data.error);
					}
				}
				
			} catch (error) {
				console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
				showMessage(`‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
			} finally {
				// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
				submitBtn.innerHTML = originalText;
				submitBtn.disabled = false;
			}
		}
		
		// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏
		function checkExistingSession() {
			const token = localStorage.getItem('pythonlab_token');
			const userData = localStorage.getItem('pythonlab_user');
			
			if (token && userData) {
				try {
					const user = JSON.parse(userData);
					
					// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
					fetch(`${API_BASE}/api/auth/verify`, {
						headers: {
							'Authorization': `Bearer ${token}`
						}
					})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
							showMainInterface();
						} else {
							// –£–¥–∞–ª—è–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
							localStorage.removeItem('pythonlab_token');
							localStorage.removeItem('pythonlab_user');
						}
					})
					.catch(() => {
						// –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
					});
					
				} catch (error) {
					// –£–¥–∞–ª—è–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
					localStorage.removeItem('pythonlab_token');
					localStorage.removeItem('pythonlab_user');
				}
			}
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
		function showMainInterface() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			if (!user) {
				location.reload();
				return;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc;">
					<!-- –®–∞–ø–∫–∞ -->
					<header style="background: white; padding: 20px 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center;">
						<div style="display: flex; align-items: center; gap: 15px;">
							<div style="font-size: 1.8rem; color: #2c82c9;">
								<i class="fas fa-code"></i>
							</div>
							<div>
								<h1 style="color: #2c82c9; margin: 0;">PythonLab</h1>
								<p style="color: #7f8c8d; margin: 0; font-size: 0.9rem;">
									${user.name} ‚Ä¢ ${user.role === 'teacher' ? 'üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å' : 'üë®‚Äçüéì –°—Ç—É–¥–µ–Ω—Ç'}
								</p>
							</div>
						</div>
						
						<div style="display: flex; align-items: center; gap: 20px;">
							<button onclick="showDashboard()" 
									style="background: #2c82c9; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
								<i class="fas fa-home"></i> –î–∞—à–±–æ—Ä–¥
							</button>
							
							<button onclick="logout()" 
									style="background: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
								<i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
							</button>
						</div>
					</header>
					
					<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
					<main style="max-width: 1400px; margin: 40px auto; padding: 0 20px;">
						<div style="text-align: center; margin-bottom: 40px;">
							<h2 style="color: #2c3e50; margin-bottom: 10px;">üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ PythonLab!</h2>
							<p style="color: #7f8c8d; font-size: 1.1rem;">
								–°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è Python —Å –∫–ª–∞—Å—Å–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–æ –æ–±—Ä–∞–∑—Ü—É Stepik
							</p>
						</div>
						
						<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
							${user.role === 'teacher' ? getTeacherCards() : getStudentCards()}
						</div>
						
						<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
						<div style="background: white; border-radius: 10px; padding: 30px; margin-top: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<h3 style="color: #2c3e50; margin-bottom: 20px;">
								<i class="fas fa-info-circle"></i> –û —Å–∏—Å—Ç–µ–º–µ PythonLab
							</h3>
							<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
								<div>
									<h4 style="color: #2c82c9; margin-bottom: 10px;">
										<i class="fas fa-book"></i> –ö—É—Ä—Å—ã
									</h4>
									<p style="color: #7f8c8d;">–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã –ø–æ Python –æ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è</p>
								</div>
								<div>
									<h4 style="color: #20bf6b; margin-bottom: 10px;">
										<i class="fas fa-users"></i> –ö–ª–∞—Å—Å—ã
									</h4>
									<p style="color: #7f8c8d;">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç –∫–ª–∞—Å—Å—ã, —Å—Ç—É–¥–µ–Ω—Ç—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º</p>
								</div>
								<div>
									<h4 style="color: #fa8231; margin-bottom: 10px;">
										<i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
									</h4>
									<p style="color: #7f8c8d;">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∏ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è</p>
								</div>
								<div>
									<h4 style="color: #9b59b6; margin-bottom: 10px;">
										<i class="fas fa-step-forward"></i> –ü–æ –æ–±—Ä–∞–∑—Ü—É Stepik
									</h4>
									<p style="color: #7f8c8d;">–û–¥–∏–Ω –∫—É—Ä—Å ‚Üí –º–Ω–æ–≥–æ –∫–ª–∞—Å—Å–æ–≤, –∫–∞–∫ –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –æ–±—É—á–µ–Ω–∏—è</p>
								</div>
							</div>
						</div>
					</main>
					
					<!-- –§—É—Ç–µ—Ä -->
					<footer style="background: #2c3e50; color: white; padding: 30px 40px; margin-top: 60px;">
						<div style="max-width: 1400px; margin: 0 auto; text-align: center;">
							<p style="margin-bottom: 10px;">PythonLab ¬© 2024 | –°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è Python</p>
							<p style="color: #bdc3c7; font-size: 0.9rem;">–í–µ—Ä—Å–∏—è 2.0 | Stepik-like –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –û–¥–∏–Ω –∫—É—Ä—Å ‚Üí –º–Ω–æ–≥–æ –∫–ª–∞—Å—Å–æ–≤</p>
						</div>
					</footer>
				</div>
			`;
		}
		
		// –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
		function getTeacherCards() {
			return `
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #2c82c9; margin-bottom: 15px;">
						<i class="fas fa-book"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–ú–æ–∏ –∫—É—Ä—Å—ã</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —É—á–µ–±–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏</p>
					<button onclick="createCourse()" 
							style="background: #2c82c9; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%; margin-bottom: 10px;">
						<i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
					</button>
					<button onclick="showMyCourses()" 
							style="background: #3498db; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-list"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É—Ä—Å–æ–≤
					</button>
				</div>
				
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #20bf6b; margin-bottom: 15px;">
						<i class="fas fa-users-class"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–ú–æ–∏ –∫–ª–∞—Å—Å—ã</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–ª–∞—Å—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—É—Ä—Å–æ–≤</p>
					<button onclick="createClass()" 
							style="background: #20bf6b; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%; margin-bottom: 10px;">
						<i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
					</button>
					<button onclick="showMyClasses()" 
							style="background: #27ae60; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-users"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–ª–∞—Å—Å–æ–≤
					</button>
				</div>
				
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #fa8231; margin-bottom: 15px;">
						<i class="fas fa-chart-bar"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç—á–µ—Ç—ã</p>
					<button onclick="openStatistics()" 
							style="background: #fa8231; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
					</button>
				</div>
				
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #9b59b6; margin-bottom: 15px;">
						<i class="fas fa-cog"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫—É—Ä—Å–∞–º–∏ –∏ –∫–ª–∞—Å—Å–∞–º–∏</p>
					<button onclick="manageCourses()" 
							style="background: #9b59b6; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%; margin-bottom: 10px;">
						<i class="fas fa-cogs"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏
					</button>
					<button onclick="manageClasses()" 
							style="background: #8e44ad; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-users-cog"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞–º–∏
					</button>
				</div>
			`;
		}
		
		// –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞
		function getStudentCards() {
			return `
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #2c82c9; margin-bottom: 15px;">
						<i class="fas fa-book"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–ú–æ–∏ –∫—É—Ä—Å—ã</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∏–∑—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
					<button onclick="openMyCourses()" 
							style="background: #2c82c9; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-book-open"></i> –ú–æ–∏ –∫—É—Ä—Å—ã
					</button>
				</div>
				
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #20bf6b; margin-bottom: 15px;">
						<i class="fas fa-users"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–ú–æ–∏ –∫–ª–∞—Å—Å—ã</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∫–ª–∞—Å—Å—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —É—á–∏—Ç–µ—Å—å</p>
					<button onclick="openStudentClasses()" 
							style="background: #20bf6b; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-user-friends"></i> –ú–æ–∏ –∫–ª–∞—Å—Å—ã
					</button>
				</div>
				
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #fa8231; margin-bottom: 15px;">
						<i class="fas fa-chart-line"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–≤–æ–∏–º–∏ —É—Å–ø–µ—Ö–∞–º–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏</p>
					<button onclick="openMyProgress()" 
							style="background: #fa8231; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-chart-bar"></i> –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å
					</button>
				</div>
				
				<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
					<div style="font-size: 2.5rem; color: #9b59b6; margin-bottom: 15px;">
						<i class="fas fa-key"></i>
					</div>
					<h3 style="color: #2c3e50; margin-bottom: 10px;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É</h3>
					<p style="color: #7f8c8d; margin-bottom: 20px;">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</p>
					<button onclick="showJoinClass()" 
							style="background: #9b59b6; color: white; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; width: 100%;">
						<i class="fas fa-user-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
					</button>
				</div>
			`;
		}
		
		// ========== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
		
		// –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
		function logout() {
			localStorage.removeItem('pythonlab_token');
			localStorage.removeItem('pythonlab_user');
			location.reload();
		}
		
		// –î–∞—à–±–æ—Ä–¥
		function showDashboard() {
			showMainInterface();
		}
		
		// ========== –§–£–ù–ö–¶–ò–ò –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–Ø ==========
		
		// –°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞
		function createCourse() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-book"></i> –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫—É—Ä—Å–∞</h2>
					</header>
					
					<div style="max-width: 800px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="courseMessage" style="margin-bottom: 20px;"></div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞:</label>
								<input type="text" id="courseTitle" placeholder="Python –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö" 
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞:</label>
								<textarea id="courseDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞..." rows="4"
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;"></textarea>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
									<select id="courseCategory" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px;">
										<option value="programming">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
										<option value="algorithms">–ê–ª–≥–æ—Ä–∏—Ç–º—ã</option>
										<option value="data-science">Data Science</option>
										<option value="web">–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
									</select>
								</div>
								
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
									<select id="courseDifficulty" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px;">
										<option value="beginner">–ù–∞—á–∞–ª—å–Ω—ã–π</option>
										<option value="intermediate">–°—Ä–µ–¥–Ω–∏–π</option>
										<option value="advanced">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
									</select>
								</div>
							</div>
							
							<div style="margin-bottom: 30px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å–æ–≤):</label>
								<input type="number" id="courseDuration" value="40" min="1" max="200"
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<button onclick="submitCourse()" 
									style="background: #2c82c9; color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 1.1rem;">
								<i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
							</button>
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitCourse() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const title = document.getElementById('courseTitle').value.trim();
			const description = document.getElementById('courseDescription').value.trim();
			const category = document.getElementById('courseCategory').value;
			const difficulty = document.getElementById('courseDifficulty').value;
			const duration = document.getElementById('courseDuration').value;
			
			if (!title || !description) {
				document.getElementById('courseMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
					</div>
				`;
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/courses`, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						teacher_id: user.id,
						title: title,
						description: description,
						category: category,
						difficulty: difficulty,
						duration_hours: parseInt(duration)
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('courseMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ –ö—É—Ä—Å "${title}" —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!
						</div>
					`;
					
					setTimeout(() => {
						showMyCourses();
					}, 2000);
				} else {
					document.getElementById('courseMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('courseMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä—Å—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
		async function showMyCourses() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				const response = await fetch(`${API_BASE}/api/teacher/${user.id}/courses`);
				const data = await response.json();
				
				if (data.success) {
					displayCourses(data.courses, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayCourses(courses, user) {
			let coursesHtml = '';
			
			if (courses.length === 0) {
				coursesHtml = `
					<div style="text-align: center; padding: 50px;">
						<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
							<i class="fas fa-book"></i>
						</div>
						<h3 style="color: #7f8c8d; margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</h3>
						<p style="color: #95a5a6; margin-bottom: 30px;">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
						<button onclick="createCourse()" 
								style="background: #2c82c9; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
							<i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å
						</button>
					</div>
				`;
			} else {
				coursesHtml = `
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
						<h2 style="color: #2c3e50;"><i class="fas fa-book"></i> –ú–æ–∏ –∫—É—Ä—Å—ã (${courses.length})</h2>
						<button onclick="createCourse()" 
								style="background: #2c82c9; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
							<i class="fas fa-plus"></i> –ù–æ–≤—ã–π –∫—É—Ä—Å
						</button>
					</div>
					
					<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
						${courses.map(course => `
							<div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
									<div>
										<h3 style="color: #2c3e50; margin-bottom: 5px;">${course.title}</h3>
										<div style="display: flex; gap: 10px; margin-bottom: 10px;">
											<span style="background: #e8f4fc; color: #2c82c9; padding: 3px 10px; border-radius: 15px; font-size: 0.9rem;">
												${course.difficulty === 'beginner' ? '–ù–∞—á–∞–ª—å–Ω—ã–π' : 
												  course.difficulty === 'intermediate' ? '–°—Ä–µ–¥–Ω–∏–π' : '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π'}
											</span>
											<span style="background: #f0f9eb; color: #20bf6b; padding: 3px 10px; border-radius: 15px; font-size: 0.9rem;">
												${course.category === 'programming' ? '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' :
												  course.category === 'algorithms' ? '–ê–ª–≥–æ—Ä–∏—Ç–º—ã' :
												  course.category === 'data-science' ? 'Data Science' : '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞'}
											</span>
										</div>
									</div>
									<button onclick="createClassForCourse(${course.id})" 
											style="background: #20bf6b; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
									</button>
								</div>
								
								<p style="color: #7f8c8d; margin-bottom: 20px; line-height: 1.5;">${course.description}</p>
								
								<div style="display: flex; justify-content: space-between; color: #7f8c8d; font-size: 0.9rem; margin-bottom: 20px;">
									<div>
										<i class="far fa-clock"></i> ${course.duration_hours} —á–∞—Å–æ–≤
									</div>
									<div>
										<i class="fas fa-users"></i> ${course.student_count || 0} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
									</div>
									<div>
										<i class="fas fa-chalkboard"></i> ${course.class_count || 0} –∫–ª–∞—Å—Å–æ–≤
									</div>
								</div>
								
								<div style="display: flex; gap: 10px;">
									<button onclick="editCourse(${course.id})" 
											style="flex: 1; background: #f39c12; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
									</button>
									<button onclick="showCourseClasses(${course.id})" 
											style="background: #3498db; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-eye"></i> –ö–ª–∞—Å—Å—ã
									</button>
									${(course.class_count || 0) === 0 ? `
										<button onclick="deleteCourse(${course.id})" 
												style="background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
											<i class="fas fa-trash"></i>
										</button>
									` : ''}
								</div>
							</div>
						`).join('')}
					</div>
				`;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-chalkboard-teacher"></i> –ü–∞–Ω–µ–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è - –ö—É—Ä—Å—ã</h2>
					</header>
					
					<div style="max-width: 1200px; margin: 0 auto;">
						${coursesHtml}
					</div>
				</div>
			`;
		}
		
		// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞
		async function editCourse(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				// –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫—É—Ä—Å–µ
				const response = await fetch(`${API_BASE}/api/courses/${courseId}`);
				const data = await response.json();
				
				if (data.success) {
					displayCourseEditForm(data.course, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayCourseEditForm(course, user) {
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMyCourses()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å–∞–º
						</button>
						<h2 style="color: #2c3e50;">
							<i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞: ${course.title}
						</h2>
					</header>
					
					<div style="max-width: 800px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="editCourseMessage" style="margin-bottom: 20px;"></div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞:</label>
								<input type="text" 
									   id="editCourseTitle" 
									   value="${course.title}"
									   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞:</label>
								<textarea id="editCourseDescription" 
										  rows="4"
										  style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">${course.description}</textarea>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
									<select id="editCourseCategory" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px;">
										<option value="programming" ${course.category === 'programming' ? 'selected' : ''}>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
										<option value="algorithms" ${course.category === 'algorithms' ? 'selected' : ''}>–ê–ª–≥–æ—Ä–∏—Ç–º—ã</option>
										<option value="data-science" ${course.category === 'data-science' ? 'selected' : ''}>Data Science</option>
										<option value="web" ${course.category === 'web' ? 'selected' : ''}>–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞</option>
									</select>
								</div>
								
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
									<select id="editCourseDifficulty" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px;">
										<option value="beginner" ${course.difficulty === 'beginner' ? 'selected' : ''}>–ù–∞—á–∞–ª—å–Ω—ã–π</option>
										<option value="intermediate" ${course.difficulty === 'intermediate' ? 'selected' : ''}>–°—Ä–µ–¥–Ω–∏–π</option>
										<option value="advanced" ${course.difficulty === 'advanced' ? 'selected' : ''}>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
									</select>
								</div>
							</div>
							
							<div style="margin-bottom: 30px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å–æ–≤):</label>
								<input type="number" 
									   id="editCourseDuration" 
									   value="${course.duration_hours}"
									   min="1" max="200"
									   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
								<button onclick="submitCourseUpdate(${course.id})" 
										style="background: #2c82c9; color: white; border: none; padding: 15px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
								</button>
								<button onclick="showMyCourses()" 
										style="background: #7f8c8d; color: white; border: none; padding: 15px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
								</button>
							</div>
							
							${course.created_at ? `
								<div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
									<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; color: #7f8c8d; font-size: 0.9rem;">
										<div>–°–æ–∑–¥–∞–Ω: ${new Date(course.created_at).toLocaleDateString('ru-RU')}</div>
										<div>ID –∫—É—Ä—Å–∞: ${course.id}</div>
									</div>
								</div>
							` : ''}
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitCourseUpdate(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const title = document.getElementById('editCourseTitle').value.trim();
			const description = document.getElementById('editCourseDescription').value.trim();
			const category = document.getElementById('editCourseCategory').value;
			const difficulty = document.getElementById('editCourseDifficulty').value;
			const duration = document.getElementById('editCourseDuration').value;
			
			if (!title || !description) {
				document.getElementById('editCourseMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
					</div>
				`;
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/courses/${courseId}`, {
					method: 'PUT',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						teacher_id: user.id,
						title: title,
						description: description,
						category: category,
						difficulty: difficulty,
						duration_hours: parseInt(duration)
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('editCourseMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ –ö—É—Ä—Å "${title}" –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!
						</div>
					`;
					
					setTimeout(() => {
						showMyCourses();
					}, 1500);
				} else {
					document.getElementById('editCourseMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('editCourseMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è –∫—É—Ä—Å–∞
		function createClassForCourse(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞
			fetch(`${API_BASE}/api/courses/${courseId}/can-create-class?teacher_id=${user.id}`)
				.then(response => response.json())
				.then(data => {
					if (data.success && data.can_create) {
						const course = data.course;
						displayClassFormForCourse(course, user);
					} else {
						alert('–û—à–∏–±–∫–∞: ' + (data.error || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –¥–ª—è —ç—Ç–æ–≥–æ –∫—É—Ä—Å–∞'));
					}
				})
				.catch(error => {
					// –ï—Å–ª–∏ endpoint –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
					console.log('–ò—Å–ø–æ–ª—å–∑—É–µ–º fallback –∑–∞–≥—Ä—É–∑–∫—É –∫—É—Ä—Å–∞');
					fetch(`${API_BASE}/api/courses/${courseId}`)
						.then(response => response.json())
						.then(courseData => {
							if (courseData.success) {
								const course = courseData.course;
								displayClassFormForCourse(course, user);
							} else {
								alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞: ' + (courseData.error || '–ö—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω'));
							}
						})
						.catch(fallbackError => {
							alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + fallbackError.message);
						});
				});
		}
		
		function displayClassFormForCourse(course, user) {
			const today = new Date().toISOString().split('T')[0];
			const threeMonthsLater = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMyCourses()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å–∞–º
						</button>
						<h2 style="color: #2c3e50;">
							<i class="fas fa-users-class"></i> –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è –∫—É—Ä—Å–∞: ${course.title}
						</h2>
					</header>
					
					<div style="max-width: 800px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="classMessage" style="margin-bottom: 20px;"></div>
							
							<div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
								<div style="font-weight: 500; margin-bottom: 5px;">–ö—É—Ä—Å:</div>
								<div style="color: #2c82c9; font-size: 1.1rem;">${course.title}</div>
								<div style="color: #7f8c8d; font-size: 0.9rem; margin-top: 5px;">${course.description}</div>
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:</label>
								<input type="text" id="className" placeholder="–ì—Ä—É–ø–ø–∞ –ê, –í–µ—Å–Ω–∞ 2024" 
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:</label>
								<textarea id="classDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤..." rows="3"
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;"></textarea>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
									<input type="date" id="classStartDate" value="${today}"
											style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								</div>
								
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
									<input type="date" id="classEndDate" value="${threeMonthsLater}"
											style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								</div>
							</div>
							
							<button onclick="submitClassForCourse(${course.id})" 
									style="background: #20bf6b; color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 1.1rem;">
								<i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
							</button>
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitClassForCourse(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const name = document.getElementById('className').value.trim();
			const description = document.getElementById('classDescription').value.trim();
			const startDate = document.getElementById('classStartDate').value;
			const endDate = document.getElementById('classEndDate').value;
			
			if (!name || !description) {
				document.getElementById('classMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
					</div>
				`;
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/classes`, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						teacher_id: user.id,
						course_id: courseId,
						name: name,
						description: description,
						start_date: startDate,
						end_date: endDate
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('classMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ –ö–ª–∞—Å—Å "${name}" —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!<br>
							<strong>–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</strong> ${data.class.join_code}<br>
							–°–æ–æ–±—â–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ —Å—Ç—É–¥–µ–Ω—Ç–∞–º –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –∫–ª–∞—Å—Å–µ.
						</div>
					`;
					
					setTimeout(() => {
						showMyCourses();
					}, 3000);
				} else {
					document.getElementById('classMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('classMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ (–æ–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
		function createClass() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			// –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
			fetch(`${API_BASE}/api/teacher/${user.id}/courses`)
				.then(response => response.json())
				.then(data => {
					if (data.success && data.courses.length > 0) {
						displayClassForm(data.courses, user);
					} else {
						// –ï—Å–ª–∏ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å–æ–∑–¥–∞—Ç—å
						document.body.innerHTML = `
							<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
								<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
									<button onclick="showMainInterface()" 
											style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
										<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
									</button>
									<h2 style="color: #2c3e50;"><i class="fas fa-users-class"></i> –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞</h2>
								</header>
								
								<div style="max-width: 600px; margin: 0 auto; text-align: center; padding: 50px 20px;">
									<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
										<i class="fas fa-exclamation-circle"></i>
									</div>
									<h3 style="color: #7f8c8d; margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</h3>
									<p style="color: #95a5a6; margin-bottom: 30px;">–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å, —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å</p>
									<button onclick="createCourse()" 
											style="background: #2c82c9; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
										<i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
									</button>
								</div>
							</div>
						`;
					}
				})
				.catch(error => {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤: ' + error.message);
				});
		}
		
		function displayClassForm(courses, user) {
			const today = new Date().toISOString().split('T')[0];
			const threeMonthsLater = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-users-class"></i> –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞</h2>
					</header>
					
					<div style="max-width: 800px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="classMessage" style="margin-bottom: 20px;"></div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å:</label>
								<select id="classCourse" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
									${courses.map(course => `
										<option value="${course.id}">${course.title} (${course.difficulty === 'beginner' ? '–ù–∞—á–∞–ª—å–Ω—ã–π' : '–°—Ä–µ–¥–Ω–∏–π'})</option>
									`).join('')}
								</select>
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:</label>
								<input type="text" id="className" placeholder="Python 2024, –ì—Ä—É–ø–ø–∞ –ê" 
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:</label>
								<textarea id="classDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤..." rows="3"
										style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;"></textarea>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
									<input type="date" id="classStartDate" value="${today}"
											style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								</div>
								
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
									<input type="date" id="classEndDate" value="${threeMonthsLater}"
											style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								</div>
							</div>
							
							<button onclick="submitClass()" 
									style="background: #20bf6b; color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 1.1rem;">
								<i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
							</button>
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitClass() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const courseId = document.getElementById('classCourse').value;
			const name = document.getElementById('className').value.trim();
			const description = document.getElementById('classDescription').value.trim();
			const startDate = document.getElementById('classStartDate').value;
			const endDate = document.getElementById('classEndDate').value;
			
			if (!name || !description) {
				document.getElementById('classMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
					</div>
				`;
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/classes`, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						teacher_id: user.id,
						course_id: parseInt(courseId),
						name: name,
						description: description,
						start_date: startDate,
						end_date: endDate
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('classMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ –ö–ª–∞—Å—Å "${name}" —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!<br>
							<strong>–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</strong> ${data.class.join_code}<br>
							<strong>–ö—É—Ä—Å:</strong> ${data.class.course_title}<br><br>
							–°–æ–æ–±—â–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ —Å—Ç—É–¥–µ–Ω—Ç–∞–º –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –∫–ª–∞—Å—Å–µ.
						</div>
					`;
					
					setTimeout(() => {
						showMainInterface();
					}, 3000);
				} else {
					document.getElementById('classMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('classMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∞—Å—Å—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
		async function showMyClasses() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				const response = await fetch(`${API_BASE}/api/teacher/${user.id}/classes-detailed`);
				const data = await response.json();
				
				if (data.success) {
					displayClasses(data.classes, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayClasses(classes, user) {
			let classesHtml = '';
			
			if (classes.length === 0) {
				classesHtml = `
					<div style="text-align: center; padding: 50px;">
						<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
							<i class="fas fa-users"></i>
						</div>
						<h3 style="color: #7f8c8d; margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫–ª–∞—Å—Å–æ–≤</h3>
						<p style="color: #95a5a6; margin-bottom: 30px;">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫—É—Ä—Å–∞</p>
						<button onclick="createClass()" 
								style="background: #20bf6b; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
							<i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å
						</button>
					</div>
				`;
			} else {
				classesHtml = `
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
						<h2 style="color: #2c3e50;"><i class="fas fa-users-class"></i> –ú–æ–∏ –∫–ª–∞—Å—Å—ã (${classes.length})</h2>
						<button onclick="createClass()" 
								style="background: #20bf6b; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
							<i class="fas fa-plus-circle"></i> –ù–æ–≤—ã–π –∫–ª–∞—Å—Å
						</button>
					</div>
					
					<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px;">
						${classes.map(cls => `
							<div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
									<div>
										<h3 style="color: #2c3e50; margin-bottom: 5px;">${cls.name}</h3>
										<p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 5px;">
											<i class="fas fa-book"></i> ${cls.course_title}
										</p>
									</div>
									<div style="text-align: right;">
										<span style="background: #${cls.is_active ? 'd4edda' : 'f8d7da'}; 
													color: #${cls.is_active ? '155724' : '721c24'}; 
													padding: 3px 10px; border-radius: 15px; font-size: 0.8rem;">
											${cls.is_active ? '–ê–∫—Ç–∏–≤–Ω—ã–π' : '–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π'}
										</span>
									</div>
								</div>
								
								<p style="color: #7f8c8d; margin-bottom: 20px; font-size: 0.95rem;">${cls.description}</p>
								
								<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
									<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 10px;">
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</div>
											<div style="font-weight: bold; color: #2c82c9; font-size: 1.1rem;">${cls.join_code}</div>
										</div>
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–°—Ç—É–¥–µ–Ω—Ç–æ–≤:</div>
											<div style="font-weight: bold; color: #20bf6b;">${cls.active_students}/${cls.total_students}</div>
										</div>
									</div>
									<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–ù–∞—á–∞–ª–æ:</div>
											<div style="font-size: 0.9rem;">${cls.start_date}</div>
										</div>
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–û–∫–æ–Ω—á–∞–Ω–∏–µ:</div>
											<div style="font-size: 0.9rem;">${cls.end_date}</div>
										</div>
									</div>
								</div>
								
								<div style="display: flex; gap: 10px;">
									<button onclick="showClassStudents(${cls.id})" 
											style="flex: 1; background: #3498db; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-user-friends"></i> –°—Ç—É–¥–µ–Ω—Ç—ã
									</button>
									<button onclick="editClass(${cls.id})" 
											style="background: #f39c12; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-edit"></i>
									</button>
									<button onclick="copyInviteCode('${cls.join_code}')" 
											style="background: #9b59b6; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-copy"></i>
									</button>
									${cls.active_students === 0 ? `
										<button onclick="deleteClass(${cls.id})" 
												style="background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
											<i class="fas fa-trash"></i>
										</button>
									` : ''}
								</div>
							</div>
						`).join('')}
					</div>
				`;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-chalkboard-teacher"></i> –ú–æ–∏ –∫–ª–∞—Å—Å—ã</h2>
					</header>
					
					<div style="max-width: 1200px; margin: 0 auto;">
						${classesHtml}
					</div>
				</div>
			`;
		}
		
		// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
		async function editClass(classId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				// –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∞—Å—Å–µ
				const response = await fetch(`${API_BASE}/api/teacher/${user.id}/classes-detailed`);
				const data = await response.json();
				
				if (data.success) {
					const classItem = data.classes.find(c => c.id == classId);
					if (classItem) {
						displayClassEditForm(classItem, user);
					} else {
						alert('–ö–ª–∞—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω');
					}
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∞—Å—Å–µ: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayClassEditForm(classItem, user) {
			const today = new Date().toISOString().split('T')[0];
			const classStartDate = classItem.start_date ? new Date(classItem.start_date).toISOString().split('T')[0] : today;
			const classEndDate = classItem.end_date ? new Date(classItem.end_date).toISOString().split('T')[0] : today;
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMyClasses()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫–ª–∞—Å—Å–∞–º
						</button>
						<h2 style="color: #2c3e50;">
							<i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞: ${classItem.name}
						</h2>
						<p style="color: #7f8c8d; margin-top: 5px;">–ö—É—Ä—Å: ${classItem.course_title}</p>
					</header>
					
					<div style="max-width: 800px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="editClassMessage" style="margin-bottom: 20px;"></div>
							
							<div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
								<div style="font-weight: 500; margin-bottom: 5px;">–ö—É—Ä—Å:</div>
								<div style="color: #2c82c9; font-size: 1.1rem;">${classItem.course_title}</div>
								<div style="color: #7f8c8d; font-size: 0.9rem; margin-top: 5px;">${classItem.course_description}</div>
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:</label>
								<input type="text" 
									   id="editClassName" 
									   value="${classItem.name}"
									   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
							</div>
							
							<div style="margin-bottom: 20px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:</label>
								<textarea id="editClassDescription" 
										  rows="3"
										  style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">${classItem.description}</textarea>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
									<input type="date" 
										   id="editClassStartDate" 
										   value="${classStartDate}"
										   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								</div>
								
								<div>
									<label style="display: block; margin-bottom: 10px; font-weight: 500;">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
									<input type="date" 
										   id="editClassEndDate" 
										   value="${classEndDate}"
										   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								</div>
							</div>
							
							<div style="margin-bottom: 30px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">–°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Å–∞:</label>
								<div style="display: flex; gap: 20px;">
									<label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
										<input type="radio" 
											   name="editClassStatus" 
											   value="active" 
											   ${classItem.is_active ? 'checked' : ''}
											   style="transform: scale(1.2);">
										<span>–ê–∫—Ç–∏–≤–Ω—ã–π</span>
									</label>
									<label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
										<input type="radio" 
											   name="editClassStatus" 
											   value="inactive" 
											   ${!classItem.is_active ? 'checked' : ''}
											   style="transform: scale(1.2);">
										<span>–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π</span>
									</label>
								</div>
								<div style="color: #7f8c8d; font-size: 0.9rem; margin-top: 5px;">
									–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
								</div>
							</div>
							
							<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 30px;">
								<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
									<div>
										<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 3px;">–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</div>
										<div style="font-weight: bold; color: #2c82c9; font-size: 1.1rem;">${classItem.join_code}</div>
									</div>
									<div>
										<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 3px;">–°—Ç—É–¥–µ–Ω—Ç–æ–≤:</div>
										<div style="font-weight: bold; color: #20bf6b;">${classItem.active_students}/${classItem.total_students}</div>
									</div>
								</div>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
								<button onclick="submitClassUpdate(${classItem.id})" 
										style="background: #20bf6b; color: white; border: none; padding: 15px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
								</button>
								<button onclick="showMyClasses()" 
										style="background: #7f8c8d; color: white; border: none; padding: 15px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
								</button>
							</div>
							
							<div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
								<div style="color: #7f8c8d; font-size: 0.9rem;">
									<div>–°–æ–∑–¥–∞–Ω: ${new Date(classItem.created_at).toLocaleDateString('ru-RU')}</div>
									<div>ID –∫–ª–∞—Å—Å–∞: ${classItem.id}</div>
									<div>–ö—É—Ä—Å ID: ${classItem.course_id}</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitClassUpdate(classId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const name = document.getElementById('editClassName').value.trim();
			const description = document.getElementById('editClassDescription').value.trim();
			const startDate = document.getElementById('editClassStartDate').value;
			const endDate = document.getElementById('editClassEndDate').value;
			const status = document.querySelector('input[name="editClassStatus"]:checked').value;
			const isActive = status === 'active';
			
			if (!name || !description || !startDate || !endDate) {
				document.getElementById('editClassMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
					</div>
				`;
				return;
			}
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—ã
			const start = new Date(startDate);
			const end = new Date(endDate);
			if (end <= start) {
				document.getElementById('editClassMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–∑–∂–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞
					</div>
				`;
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/classes/${classId}`, {
					method: 'PUT',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						teacher_id: user.id,
						name: name,
						description: description,
						start_date: startDate,
						end_date: endDate,
						is_active: isActive
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('editClassMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ –ö–ª–∞—Å—Å "${name}" –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!
						</div>
					`;
					
					setTimeout(() => {
						showMyClasses();
					}, 1500);
				} else {
					document.getElementById('editClassMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('editClassMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∞—Å—Å—ã –∫—É—Ä—Å–∞
		async function showCourseClasses(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				const response = await fetch(`${API_BASE}/api/courses/${courseId}/classes`);
				const data = await response.json();
				
				if (data.success) {
					displayCourseClasses(courseId, data.classes, data.total_classes, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayCourseClasses(courseId, classes, totalClasses, user) {
			// –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫—É—Ä—Å–µ
			fetch(`${API_BASE}/api/courses/${courseId}`)
				.then(response => response.json())
				.then(courseData => {
					if (!courseData.success) {
						alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞');
						return;
					}
					
					const course = courseData.course;
					let classesHtml = '';
					
					if (totalClasses === 0) {
						classesHtml = `
							<div style="text-align: center; padding: 50px;">
								<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
									<i class="fas fa-users"></i>
								</div>
								<h3 style="color: #7f8c8d; margin-bottom: 20px;">–î–ª—è —ç—Ç–æ–≥–æ –∫—É—Ä—Å–∞ –ø–æ–∫–∞ –Ω–µ—Ç –∫–ª–∞—Å—Å–æ–≤</h3>
								<p style="color: #95a5a6; margin-bottom: 30px;">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —ç—Ç–æ–≥–æ –∫—É—Ä—Å–∞</p>
								<button onclick="createClassForCourse(${courseId})" 
										style="background: #20bf6b; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
								</button>
							</div>
						`;
					} else {
						classesHtml = `
							<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
								<h2 style="color: #2c3e50;">
									<i class="fas fa-users-class"></i> –ö–ª–∞—Å—Å—ã –∫—É—Ä—Å–∞: ${course.title} (${totalClasses})
								</h2>
								<button onclick="createClassForCourse(${courseId})" 
										style="background: #20bf6b; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
									<i class="fas fa-plus-circle"></i> –ù–æ–≤—ã–π –∫–ª–∞—Å—Å
								</button>
							</div>
							
							<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px;">
								${classes.map(cls => `
									<div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
										<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
											<div>
												<h3 style="color: #2c3e50; margin-bottom: 5px;">${cls.name}</h3>
											</div>
											<div style="text-align: right;">
												<span style="background: #${cls.is_active ? 'd4edda' : 'f8d7da'}; 
															color: #${cls.is_active ? '155724' : '721c24'}; 
															padding: 3px 10px; border-radius: 15px; font-size: 0.8rem;">
													${cls.is_active ? '–ê–∫—Ç–∏–≤–Ω—ã–π' : '–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π'}
												</span>
											</div>
										</div>
										
										<p style="color: #7f8c8d; margin-bottom: 20px; font-size: 0.95rem;">${cls.description}</p>
										
										<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
											<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 10px;">
												<div>
													<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</div>
													<div style="font-weight: bold; color: #2c82c9; font-size: 1.1rem;">${cls.join_code}</div>
												</div>
												<div>
													<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–°—Ç—É–¥–µ–Ω—Ç–æ–≤:</div>
													<div style="font-weight: bold; color: #20bf6b;">${cls.active_students}/${cls.total_students}</div>
												</div>
											</div>
											<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
												<div>
													<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–ù–∞—á–∞–ª–æ:</div>
													<div style="font-size: 0.9rem;">${cls.start_date}</div>
												</div>
												<div>
													<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–û–∫–æ–Ω—á–∞–Ω–∏–µ:</div>
													<div style="font-size: 0.9rem;">${cls.end_date}</div>
												</div>
											</div>
										</div>
										
										<div style="display: flex; gap: 10px;">
											<button onclick="showClassStudents(${cls.id})" 
													style="flex: 1; background: #3498db; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
												<i class="fas fa-user-friends"></i> –°—Ç—É–¥–µ–Ω—Ç—ã
											</button>
											<button onclick="copyInviteCode('${cls.join_code}')" 
													style="background: #9b59b6; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
												<i class="fas fa-copy"></i>
											</button>
											${cls.active_students === 0 ? `
												<button onclick="deleteClass(${cls.id})" 
														style="background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
													<i class="fas fa-trash"></i>
												</button>
											` : ''}
										</div>
									</div>
								`).join('')}
							</div>
						`;
					}
					
					document.body.innerHTML = `
						<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
							<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<button onclick="showMyCourses()" 
										style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
									<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å–∞–º
								</button>
								<h2 style="color: #2c3e50;">
									<i class="fas fa-book"></i> ${course.title} - –ö–ª–∞—Å—Å—ã
								</h2>
								<p style="color: #7f8c8d; margin-top: 5px;">${course.description}</p>
							</header>
							
							<div style="max-width: 1200px; margin: 0 auto;">
								${classesHtml}
							</div>
						</div>
					`;
				})
				.catch(error => {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫—É—Ä—Å–µ: ' + error.message);
				});
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫–ª–∞—Å—Å–∞
		async function showClassStudents(classId) {
			try {
				const response = await fetch(`${API_BASE}/api/classes/${classId}/students`);
				const data = await response.json();
				
				if (data.success) {
					displayClassStudents(classId, data.class, data.course, data.students, data.total_students);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayClassStudents(classId, classInfo, courseInfo, students, totalStudents) {
			let studentsHtml = '';
			
			if (totalStudents === 0) {
				studentsHtml = `
					<div style="text-align: center; padding: 50px;">
						<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
							<i class="fas fa-user-friends"></i>
						</div>
						<h3 style="color: #7f8c8d; margin-bottom: 20px;">–í —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h3>
						<p style="color: #95a5a6; margin-bottom: 30px;">–°—Ç—É–¥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é –∫–æ–¥–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</p>
						<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; display: inline-block; margin-top: 20px;">
							<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 10px;">–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</div>
							<div style="font-size: 1.5rem; font-weight: bold; color: #2c82c9;">${classInfo ? classInfo.join_code : 'N/A'}</div>
						</div>
					</div>
				`;
			} else {
				studentsHtml = `
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
						<h2 style="color: #2c3e50;">
							<i class="fas fa-user-friends"></i> –°—Ç—É–¥–µ–Ω—Ç—ã –∫–ª–∞—Å—Å–∞: ${totalStudents}
						</h2>
					</div>
					
					<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
						<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
							<div>
								<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 5px;">–ö–ª–∞—Å—Å:</div>
								<div style="font-weight: bold; font-size: 1.1rem;">${classInfo ? classInfo.name : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–ª–∞—Å—Å'}</div>
							</div>
							<div>
								<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 5px;">–ö—É—Ä—Å:</div>
								<div style="font-weight: bold; font-size: 1.1rem;">${courseInfo ? courseInfo.title : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫—É—Ä—Å'}</div>
							</div>
							<div>
								<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 5px;">–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</div>
								<div style="font-weight: bold; font-size: 1.1rem; color: #2c82c9;">${classInfo ? classInfo.join_code : 'N/A'}</div>
							</div>
							<div>
								<div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 5px;">–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:</div>
								<div style="font-weight: bold; font-size: 1.1rem; color: #20bf6b;">${totalStudents}</div>
							</div>
						</div>
					</div>
					
					<div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<div style="display: grid; grid-template-columns: 40px 1fr 1fr 1fr 150px 100px; background: #2c82c9; color: white; padding: 15px 20px; font-weight: 500;">
							<div>#</div>
							<div>–°—Ç—É–¥–µ–Ω—Ç</div>
							<div>Email</div>
							<div>–î–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>
							<div>–û—Ü–µ–Ω–∫–∞</div>
							<div>–î–µ–π—Å—Ç–≤–∏—è</div>
						</div>
						
						${students.map((student, index) => `
							<div style="display: grid; grid-template-columns: 40px 1fr 1fr 1fr 150px 100px; padding: 15px 20px; border-bottom: 1px solid #eee; align-items: center;">
								<div style="color: #7f8c8d;">${index + 1}</div>
								<div style="display: flex; align-items: center; gap: 10px;">
									<div style="width: 30px; height: 30px; background: #2c82c9; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">
										${student.avatar || student.name.substring(0, 2).toUpperCase()}
									</div>
									<div>
										<div style="font-weight: 500;">${student.name}</div>
									</div>
								</div>
								<div>${student.email}</div>
								<div>${new Date(student.joined_at).toLocaleDateString('ru-RU')}</div>
								<div>
									${student.final_grade ? `
										<span style="background: #20bf6b; color: white; padding: 5px 10px; border-radius: 15px; font-weight: bold;">
											${student.final_grade}/100
										</span>
									` : `
										<span style="color: #7f8c8d; font-style: italic;">–Ω–µ –æ—Ü–µ–Ω–µ–Ω</span>
									`}
								</div>
								<div>
									<button onclick="evaluateStudent(${classId}, ${student.student_id})" 
											style="background: #f39c12; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.9rem;">
										<i class="fas fa-edit"></i> –û—Ü–µ–Ω–∏—Ç—å
									</button>
								</div>
							</div>
						`).join('')}
					</div>
				`;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMyClasses()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫–ª–∞—Å—Å–∞–º
						</button>
						<h2 style="color: #2c3e50;">
							<i class="fas fa-user-friends"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–º
						</h2>
					</header>
					
					<div style="max-width: 1200px; margin: 0 auto;">
						${studentsHtml}
					</div>
				</div>
			`;
		}
		
		// ========== –£–î–ê–õ–ï–ù–ò–ï ==========
		
		// –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
		function copyInviteCode(code) {
			navigator.clipboard.writeText(code)
				.then(() => {
					alert('–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ' + code);
				})
				.catch(() => {
					alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥');
				});
		}
		
		// –£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å
		async function deleteCourse(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Ä—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/courses/${courseId}?teacher_id=${user.id}`, {
					method: 'DELETE'
				});
				
				const data = await response.json();
				
				if (data.success) {
					alert('–ö—É—Ä—Å —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ');
					showMyCourses();
				} else {
					alert('–û—à–∏–±–∫–∞: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		// –£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å
		async function deleteClass(classId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/classes/${classId}?teacher_id=${user.id}`, {
					method: 'DELETE'
				});
				
				const data = await response.json();
				
				if (data.success) {
					alert('–ö–ª–∞—Å—Å —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ');
					showMyClasses();
				} else {
					alert('–û—à–∏–±–∫–∞: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		// ========== –§–£–ù–ö–¶–ò–ò –°–¢–£–î–ï–ù–¢–ê ==========
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
		async function openMyCourses() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				const response = await fetch(`${API_BASE}/api/student/${user.id}/courses`);
				const data = await response.json();
				
				if (data.success) {
					displayStudentCourses(data.courses, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayStudentCourses(courses, user) {
			let coursesHtml = '';
			
			if (courses.length === 0) {
				coursesHtml = `
					<div style="text-align: center; padding: 50px;">
						<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
							<i class="fas fa-book"></i>
						</div>
						<h3 style="color: #7f8c8d; margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</h3>
						<p style="color: #95a5a6; margin-bottom: 30px;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ –∫–ª–∞—Å—Å—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</p>
						<button onclick="showJoinClass()" 
								style="background: #2c82c9; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
							<i class="fas fa-user-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É
						</button>
					</div>
				`;
			} else {
				coursesHtml = `
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
						<h2 style="color: #2c3e50;"><i class="fas fa-book"></i> –ú–æ–∏ –∫—É—Ä—Å—ã (${courses.length})</h2>
						<button onclick="showJoinClass()" 
								style="background: #2c82c9; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
							<i class="fas fa-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
						</button>
					</div>
					
					<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
						${courses.map(course => `
							<div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<div style="margin-bottom: 15px;">
									<h3 style="color: #2c3e50; margin-bottom: 5px;">${course.title}</h3>
									<div style="display: flex; gap: 10px; margin-bottom: 10px;">
										<span style="background: #e8f4fc; color: #2c82c9; padding: 3px 10px; border-radius: 15px; font-size: 0.9rem;">
											${course.difficulty === 'beginner' ? '–ù–∞—á–∞–ª—å–Ω—ã–π' : 
											  course.difficulty === 'intermediate' ? '–°—Ä–µ–¥–Ω–∏–π' : '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π'}
										</span>
										<span style="background: #f0f9eb; color: #20bf6b; padding: 3px 10px; border-radius: 15px; font-size: 0.9rem;">
											${course.category === 'programming' ? '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' :
											  course.category === 'algorithms' ? '–ê–ª–≥–æ—Ä–∏—Ç–º—ã' :
											  course.category === 'data-science' ? 'Data Science' : '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞'}
										</span>
									</div>
								</div>
								
								<p style="color: #7f8c8d; margin-bottom: 20px; line-height: 1.5;">${course.description}</p>
								
								<!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
								<div style="margin-bottom: 20px;">
									<div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
										<span style="font-size: 0.9rem; color: #7f8c8d;">–ü—Ä–æ–≥—Ä–µ—Å—Å:</span>
										<span style="font-weight: bold; color: #2c82c9;">${course.progress.completion_percentage}%</span>
									</div>
									<div style="height: 8px; background: #ecf0f1; border-radius: 4px; overflow: hidden;">
										<div style="height: 100%; width: ${course.progress.completion_percentage}%; background: #20bf6b; border-radius: 4px;"></div>
									</div>
									<div style="font-size: 0.85rem; color: #7f8c8d; margin-top: 5px;">
										${course.progress.completed_lessons} –∏–∑ ${course.progress.total_lessons} —É—Ä–æ–∫–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
									</div>
								</div>
								
								<div style="display: flex; justify-content: space-between; color: #7f8c8d; font-size: 0.9rem; margin-bottom: 20px;">
									<div>
										<i class="far fa-clock"></i> ${course.duration_hours} —á–∞—Å–æ–≤
									</div>
									<div>
										<i class="fas fa-user-tie"></i> ${course.author_name}
									</div>
									<div>
										<i class="fas fa-users"></i> ${course.classes_count} –∫–ª–∞—Å—Å–æ–≤
									</div>
								</div>
								
								<div style="display: flex; gap: 10px;">
									<button onclick="openCourse(${course.id})" 
											style="flex: 1; background: #2c82c9; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-play"></i> –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
									</button>
									<button onclick="showCourseProgress(${course.id})" 
											style="background: #fa8231; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-chart-line"></i>
									</button>
								</div>
							</div>
						`).join('')}
					</div>
				`;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-user-graduate"></i> –ú–æ–∏ –∫—É—Ä—Å—ã</h2>
					</header>
					
					<div style="max-width: 1200px; margin: 0 auto;">
						${coursesHtml}
					</div>
				</div>
			`;
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∞—Å—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
		async function openStudentClasses() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				const response = await fetch(`${API_BASE}/api/student/${user.id}/classes`);
				const data = await response.json();
				
				if (data.success) {
					displayStudentClasses(data.classes, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayStudentClasses(classes, user) {
			let classesHtml = '';
			
			if (classes.length === 0) {
				classesHtml = `
					<div style="text-align: center; padding: 50px;">
						<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
							<i class="fas fa-users"></i>
						</div>
						<h3 style="color: #7f8c8d; margin-bottom: 20px;">–í—ã –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –∫–ª–∞—Å—Å–∞–º</h3>
						<p style="color: #95a5a6; margin-bottom: 30px;">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</p>
						<button onclick="showJoinClass()" 
								style="background: #2c82c9; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
							<i class="fas fa-user-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É
						</button>
					</div>
				`;
			} else {
				classesHtml = `
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
						<h2 style="color: #2c3e50;"><i class="fas fa-users"></i> –ú–æ–∏ –∫–ª–∞—Å—Å—ã (${classes.length})</h2>
						<button onclick="showJoinClass()" 
								style="background: #2c82c9; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
							<i class="fas fa-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
						</button>
					</div>
					
					<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px;">
						${classes.map(cls => `
							<div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
									<div>
										<h3 style="color: #2c3e50; margin-bottom: 5px;">${cls.class_name}</h3>
										<p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 5px;">
											<i class="fas fa-book"></i> ${cls.course_title}
										</p>
										<p style="color: #7f8c8d; font-size: 0.85rem;">
											<i class="fas fa-chalkboard-teacher"></i> –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: ${cls.teacher_name}
										</p>
									</div>
									<div style="text-align: right;">
										<span style="background: #${cls.is_active ? 'd4edda' : 'f8d7da'}; 
													color: #${cls.is_active ? '155724' : '721c24'}; 
													padding: 3px 10px; border-radius: 15px; font-size: 0.8rem;">
											${cls.is_active ? '–ê–∫—Ç–∏–≤–Ω—ã–π' : '–ó–∞–≤–µ—Ä—à–µ–Ω'}
										</span>
									</div>
								</div>
								
								<p style="color: #7f8c8d; margin-bottom: 20px; font-size: 0.95rem;">${cls.class_description}</p>
								
								<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
									<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–î–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:</div>
											<div style="font-size: 0.9rem; font-weight: 500;">${new Date(cls.joined_at).toLocaleDateString('ru-RU')}</div>
										</div>
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞:</div>
											<div style="font-size: 0.9rem; font-weight: 500;">
												${cls.final_grade ? `
													<span style="color: #20bf6b; font-weight: bold;">${cls.final_grade}/100</span>
												` : `
													<span style="color: #7f8c8d; font-style: italic;">–Ω–µ –æ—Ü–µ–Ω–µ–Ω</span>
												`}
											</div>
										</div>
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–ù–∞—á–∞–ª–æ:</div>
											<div style="font-size: 0.9rem;">${new Date(cls.start_date).toLocaleDateString('ru-RU')}</div>
										</div>
										<div>
											<div style="font-size: 0.8rem; color: #7f8c8d; margin-bottom: 3px;">–û–∫–æ–Ω—á–∞–Ω–∏–µ:</div>
											<div style="font-size: 0.9rem;">${new Date(cls.end_date).toLocaleDateString('ru-RU')}</div>
										</div>
									</div>
								</div>
								
								<div style="display: flex; gap: 10px;">
									<button onclick="openCourseFromClass(${cls.course_id})" 
											style="flex: 1; background: #2c82c9; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-play"></i> –ü–µ—Ä–µ–π—Ç–∏ –∫ –∫—É—Ä—Å—É
									</button>
									<button onclick="showClassDetails(${cls.class_id})" 
											style="background: #3498db; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
										<i class="fas fa-info-circle"></i>
									</button>
								</div>
							</div>
						`).join('')}
					</div>
				`;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-user-graduate"></i> –ú–æ–∏ –∫–ª–∞—Å—Å—ã</h2>
					</header>
					
					<div style="max-width: 1200px; margin: 0 auto;">
						${classesHtml}
					</div>
				</div>
			`;
		}
		
		// –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–∞
		async function openMyProgress() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			try {
				const response = await fetch(`${API_BASE}/api/student/${user.id}/classes`);
				const data = await response.json();
				
				if (data.success) {
					displayStudentProgress(data.classes, user);
				} else {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: ' + data.error);
				}
			} catch (error) {
				alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
			}
		}
		
		function displayStudentProgress(classes, user) {
			let progressHtml = '';
			
			if (classes.length === 0) {
				progressHtml = `
					<div style="text-align: center; padding: 50px;">
						<div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
							<i class="fas fa-chart-line"></i>
						</div>
						<h3 style="color: #7f8c8d; margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ</h3>
						<p style="color: #95a5a6; margin-bottom: 30px;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ –∫–ª–∞—Å—Å—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</p>
						<button onclick="showJoinClass()" 
								style="background: #2c82c9; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
							<i class="fas fa-user-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É
						</button>
					</div>
				`;
			} else {
				const totalClasses = classes.length;
				const activeClasses = classes.filter(c => c.is_active).length;
				const completedClasses = classes.filter(c => !c.is_active).length;
				const gradedClasses = classes.filter(c => c.final_grade !== null).length;
				const averageGrade = gradedClasses > 0 
					? Math.round(classes.reduce((sum, c) => sum + (c.final_grade || 0), 0) / gradedClasses)
					: 0;
				
				progressHtml = `
					<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
						<h2 style="color: #2c3e50;"><i class="fas fa-chart-line"></i> –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
					</div>
					
					<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
						<div style="background: white; border-radius: 10px; padding: 25px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div style="font-size: 2.5rem; color: #2c82c9; margin-bottom: 10px;">${totalClasses}</div>
							<div style="font-weight: 500; color: #2c3e50;">–í—Å–µ–≥–æ –∫–ª–∞—Å—Å–æ–≤</div>
						</div>
						<div style="background: white; border-radius: 10px; padding: 25px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div style="font-size: 2.5rem; color: #20bf6b; margin-bottom: 10px;">${activeClasses}</div>
							<div style="font-weight: 500; color: #2c3e50;">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
						</div>
						<div style="background: white; border-radius: 10px; padding: 25px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div style="font-size: 2.5rem; color: #fa8231; margin-bottom: 10px;">${completedClasses}</div>
							<div style="font-weight: 500; color: #2c3e50;">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
						</div>
						<div style="background: white; border-radius: 10px; padding: 25px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div style="font-size: 2.5rem; color: #9b59b6; margin-bottom: 10px;">${averageGrade}</div>
							<div style="font-weight: 500; color: #2c3e50;">–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞</div>
						</div>
					</div>
					
					<h3 style="color: #2c3e50; margin-bottom: 20px;">–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–ª–∞—Å—Å–∞–º</h3>
					<div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px;">
						<div style="display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 150px; background: #2c82c9; color: white; padding: 15px 20px; font-weight: 500;">
							<div>–ö–ª–∞—Å—Å –∏ –∫—É—Ä—Å</div>
							<div>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
							<div>–°—Ç–∞—Ç—É—Å</div>
							<div>–ü–µ—Ä–∏–æ–¥</div>
							<div>–û—Ü–µ–Ω–∫–∞</div>
						</div>
						
						${classes.map(cls => `
							<div style="display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 150px; padding: 15px 20px; border-bottom: 1px solid #eee; align-items: center;">
								<div>
									<div style="font-weight: 500;">${cls.class_name}</div>
									<div style="font-size: 0.9rem; color: #7f8c8d;">${cls.course_title}</div>
								</div>
								<div>${cls.teacher_name}</div>
								<div>
									<span style="background: #${cls.is_active ? 'e8f4fc' : 'f8f9fa'}; 
												color: #${cls.is_active ? '2c82c9' : '7f8c8d'}; 
												padding: 5px 10px; border-radius: 15px; font-size: 0.85rem;">
										${cls.is_active ? '–ê–∫—Ç–∏–≤–Ω—ã–π' : '–ó–∞–≤–µ—Ä—à–µ–Ω'}
									</span>
								</div>
								<div>
									<div style="font-size: 0.85rem;">${new Date(cls.start_date).toLocaleDateString('ru-RU')}</div>
									<div style="font-size: 0.85rem; color: #7f8c8d;">–¥–æ ${new Date(cls.end_date).toLocaleDateString('ru-RU')}</div>
								</div>
								<div>
									${cls.final_grade ? `
										<div style="display: flex; align-items: center; gap: 5px;">
											<span style="font-weight: bold; color: #20bf6b;">${cls.final_grade}</span>
											<span style="color: #7f8c8d;">/100</span>
										</div>
									` : `
										<span style="color: #7f8c8d; font-style: italic;">–Ω–µ –æ—Ü–µ–Ω–µ–Ω</span>
									`}
								</div>
							</div>
						`).join('')}
					</div>
				`;
			}
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-user-graduate"></i> –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
					</header>
					
					<div style="max-width: 1200px; margin: 0 auto;">
						${progressHtml}
					</div>
				</div>
			`;
		}
		
		// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É
		function showJoinClass() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showMainInterface()" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
						</button>
						<h2 style="color: #2c3e50;"><i class="fas fa-key"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É</h2>
					</header>
					
					<div style="max-width: 600px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="joinMessage" style="margin-bottom: 20px;"></div>
							
							<div style="text-align: center; margin-bottom: 30px;">
								<div style="font-size: 3rem; color: #2c82c9; margin-bottom: 15px;">
									<i class="fas fa-user-plus"></i>
								</div>
								<h3 style="color: #2c3e50; margin-bottom: 10px;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–ª–∞—Å—Å—É</h3>
								<p style="color: #7f8c8d;">
									–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
								</p>
							</div>
							
							<div style="margin-bottom: 30px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">
									<i class="fas fa-code"></i> –ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:
								</label>
								<input type="text" 
										id="joinCode" 
										placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è" 
										style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 1.2rem; text-align: center; letter-spacing: 2px;"
										oninput="this.value = this.value.toUpperCase()">
							</div>
							
							<button onclick="submitJoinClass()" 
									style="background: #20bf6b; color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; width: 100%; font-size: 1.1rem;">
								<i class="fas fa-check"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª–∞—Å—Å—É
							</button>
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitJoinClass() {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const joinCode = document.getElementById('joinCode').value.trim().toUpperCase();
			
			if (!joinCode) {
				document.getElementById('joinMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
					</div>
				`;
				return;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/classes/join-by-code`, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						student_id: user.id,
						invite_code: joinCode
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('joinMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ ${data.message}<br>
							–ö–ª–∞—Å—Å: ${data.class.name}<br>
							${data.course ? `–ö—É—Ä—Å: ${data.course.title}<br>` : ''}
							${data.teacher ? `–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: ${data.teacher.name}` : ''}
						</div>
					`;
					
					setTimeout(() => {
						showMainInterface();
					}, 3000);
				} else {
					document.getElementById('joinMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('joinMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// ========== –û–¶–ï–ù–ö–ê –°–¢–£–î–ï–ù–¢–û–í ==========
		
		async function evaluateStudent(classId, studentId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			// –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—É–¥–µ–Ω—Ç–µ
			const studentResponse = await fetch(`${API_BASE}/api/classes/${classId}/students`);
			const studentData = await studentResponse.json();
			
			if (!studentData.success) {
				alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—É–¥–µ–Ω—Ç–µ: ' + studentData.error);
				return;
			}
			
			const student = studentData.students.find(s => s.student_id == studentId);
			if (!student) {
				alert('–°—Ç—É–¥–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
				return;
			}
			
			// –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∞—Å—Å–µ
			const classInfo = studentData.class;
			
			displayEvaluationForm(classId, student, classInfo, user);
		}
		
		function displayEvaluationForm(classId, student, classInfo, user) {
			document.body.innerHTML = `
				<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
					<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
						<button onclick="showClassStudents(${classId})" 
								style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
							<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ —Å—Ç—É–¥–µ–Ω—Ç–∞–º
						</button>
						<h2 style="color: #2c3e50;">
							<i class="fas fa-graduation-cap"></i> –û—Ü–µ–Ω–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞: ${student.name}
						</h2>
						<p style="color: #7f8c8d; margin-top: 5px;">–ö–ª–∞—Å—Å: ${classInfo.name}</p>
					</header>
					
					<div style="max-width: 600px; margin: 0 auto;">
						<div style="background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
							<div id="evaluationMessage" style="margin-bottom: 20px;"></div>
							
							<div style="display: flex; align-items: center; gap: 20px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
								<div style="width: 60px; height: 60px; background: #2c82c9; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold;">
									${student.avatar}
								</div>
								<div>
									<h3 style="color: #2c3e50; margin-bottom: 5px;">${student.name}</h3>
									<p style="color: #7f8c8d; margin-bottom: 5px;">${student.email}</p>
									<p style="color: #7f8c8d; font-size: 0.9rem;">
										–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è: ${new Date(student.joined_at).toLocaleDateString('ru-RU')}
									</p>
								</div>
							</div>
							
							<div style="margin-bottom: 30px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">
									<i class="fas fa-star"></i> –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ (0-100):
								</label>
								<input type="number" 
									   id="studentGrade" 
									   value="${student.final_grade || ''}"
									   min="0" max="100"
									   placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 0 –¥–æ 100"
									   style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1.1rem;">
								<div style="color: #7f8c8d; font-size: 0.9rem; margin-top: 5px;">
									–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –æ—Ü–µ–Ω–∫—É
								</div>
							</div>
							
							<div style="margin-bottom: 30px;">
								<label style="display: block; margin-bottom: 10px; font-weight: 500;">
									<i class="fas fa-user-check"></i> –°—Ç–∞—Ç—É—Å —Å—Ç—É–¥–µ–Ω—Ç–∞:
								</label>
								<select id="studentStatus" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px;">
									<option value="active" ${student.status === 'active' ? 'selected' : ''}>–ê–∫—Ç–∏–≤–Ω—ã–π</option>
									<option value="completed" ${student.status === 'completed' ? 'selected' : ''}>–ó–∞–≤–µ—Ä—à–∏–ª –∫—É—Ä—Å</option>
									<option value="dropped" ${student.status === 'dropped' ? 'selected' : ''}>–í—ã–±—ã–ª</option>
									<option value="suspended" ${student.status === 'suspended' ? 'selected' : ''}>–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</option>
								</select>
							</div>
							
							<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
								<button onclick="submitStudentEvaluation(${classId}, ${student.student_id})" 
										style="background: #20bf6b; color: white; border: none; padding: 15px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-check"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫—É
								</button>
								<button onclick="showClassStudents(${classId})" 
										style="background: #7f8c8d; color: white; border: none; padding: 15px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
									<i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
								</button>
							</div>
						</div>
					</div>
				</div>
			`;
		}
		
		async function submitStudentEvaluation(classId, studentId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			const gradeInput = document.getElementById('studentGrade').value;
			const status = document.getElementById('studentStatus').value;
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ü–µ–Ω–∫—É
			let finalGrade = null;
			if (gradeInput.trim() !== '') {
				const grade = parseInt(gradeInput);
				if (isNaN(grade) || grade < 0 || grade > 100) {
					document.getElementById('evaluationMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å–ª–æ–º –æ—Ç 0 –¥–æ 100
						</div>
					`;
					return;
				}
				finalGrade = grade;
			}
			
			try {
				const response = await fetch(`${API_BASE}/api/classes/${classId}/students/${studentId}`, {
					method: 'PUT',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						teacher_id: user.id,
						final_grade: finalGrade,
						status: status
					})
				});
				
				const data = await response.json();
				
				if (data.success) {
					document.getElementById('evaluationMessage').innerHTML = `
						<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
							‚úÖ –û—Ü–µ–Ω–∫–∞ –∏ —Å—Ç–∞—Ç—É—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
						</div>
					`;
					
					setTimeout(() => {
						showClassStudents(classId);
					}, 1500);
				} else {
					document.getElementById('evaluationMessage').innerHTML = `
						<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
							‚ùå –û—à–∏–±–∫–∞: ${data.error}
						</div>
					`;
				}
			} catch (error) {
				document.getElementById('evaluationMessage').innerHTML = `
					<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
						‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}
					</div>
				`;
			}
		}
		
		// ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –°–¢–£–î–ï–ù–¢–ê ==========
		
		function openCourse(courseId) {
			alert('–ó–∞–ø—É—Å–∫ –∫—É—Ä—Å–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–∑–∂–µ');
		}
		
		function openCourseFromClass(courseId) {
			openCourse(courseId);
		}
		
		function showCourseProgress(courseId) {
			const user = JSON.parse(localStorage.getItem('pythonlab_user'));
			
			fetch(`${API_BASE}/api/student/${user.id}/course/${courseId}/progress`)
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						displayCourseProgress(courseId, data.progress, user);
					} else {
						alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: ' + data.error);
					}
				})
				.catch(error => {
					alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
				});
		}
		
		function displayCourseProgress(courseId, progress, user) {
			fetch(`${API_BASE}/api/courses/${courseId}`)
				.then(response => response.json())
				.then(courseData => {
					if (!courseData.success) {
						alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞');
						return;
					}
					
					const course = courseData.course;
					
					document.body.innerHTML = `
						<div style="min-height: 100vh; background: #f8fafc; padding: 20px;">
							<header style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
								<button onclick="openMyCourses()" 
										style="background: #7f8c8d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
									<i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å–∞–º
								</button>
								<h2 style="color: #2c3e50;">
									<i class="fas fa-chart-line"></i> –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫—É—Ä—Å—É: ${course.title}
								</h2>
							</header>
							
							<div style="max-width: 800px; margin: 0 auto;">
								<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 30px;">
									<div style="background: white; border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
										<div style="font-size: 2rem; color: #2c82c9; margin-bottom: 10px;">${progress.completion_percentage}%</div>
										<div style="font-weight: 500; color: #2c3e50;">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
									</div>
									<div style="background: white; border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
										<div style="font-size: 2rem; color: #20bf6b; margin-bottom: 10px;">${progress.completed_lessons}/${progress.total_lessons}</div>
										<div style="font-weight: 500; color: #2c3e50;">–£—Ä–æ–∫–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</div>
									</div>
									<div style="background: white; border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
										<div style="font-size: 2rem; color: #fa8231; margin-bottom: 10px;">${progress.average_score || 0}</div>
										<div style="font-weight: 500; color: #2c3e50;">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div>
									</div>
								</div>
								
								<div style="background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
									<h3 style="color: #2c3e50; margin-bottom: 20px;">–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –º–æ–¥—É–ª—è–º</h3>
									
									${progress.modules.map(module => `
										<div style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
											<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
												<div style="font-weight: 500; color: #2c3e50;">${module.title}</div>
												<div>
													${module.completed ? `
														<span style="background: #d4edda; color: #155724; padding: 5px 10px; border-radius: 15px; font-size: 0.85rem;">
															<i class="fas fa-check"></i> –ó–∞–≤–µ—Ä—à–µ–Ω
														</span>
													` : `
														<span style="background: #fff3cd; color: #856404; padding: 5px 10px; border-radius: 15px; font-size: 0.85rem;">
															–í –ø—Ä–æ—Ü–µ—Å—Å–µ
														</span>
													`}
												</div>
											</div>
											
											<div style="margin-bottom: 5px;">
												<div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
													<span style="font-size: 0.9rem; color: #7f8c8d;">–ü—Ä–æ–≥—Ä–µ—Å—Å: ${module.progress}%</span>
													<span style="font-size: 0.9rem; color: #7f8c8d;">${module.completed_lessons}/${module.lessons} —É—Ä–æ–∫–æ–≤</span>
												</div>
												<div style="height: 8px; background: #ecf0f1; border-radius: 4px; overflow: hidden;">
													<div style="height: 100%; width: ${module.progress}%; background: #${module.completed ? '20bf6b' : 'fa8231'}; border-radius: 4px;"></div>
												</div>
											</div>
										</div>
									`).join('')}
								</div>
							</div>
						</div>
					`;
				})
				.catch(error => {
					alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞: ' + error.message);
				});
		}
		
		function showClassDetails(classId) {
			alert('–î–µ—Ç–∞–ª–∏ –∫–ª–∞—Å—Å–∞ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –ø–æ–∑–∂–µ');
		}
		
		// ========== –û–ë–©–ò–ï –§–£–ù–ö–¶–ò–ò ==========
		
		function openStatistics() {
			alert('–§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–∑–∂–µ');
		}
		
		function manageCourses() {
			showMyCourses();
		}
		
		function manageClasses() {
			showMyClasses();
		}
		
		function showCourseClasses(courseId) {
			showCourseClasses(courseId);
		}
		
		// ========== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
		
		function showMessage(text, type) {
			const messageDiv = document.getElementById('message');
			messageDiv.textContent = text;
			messageDiv.className = `message ${type}`;
			
			// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
			if (type !== 'error') {
				setTimeout(() => {
					messageDiv.className = 'message';
				}, 5000);
			}
		}
		
		function clearMessages() {
			const messageDiv = document.getElementById('message');
			messageDiv.className = 'message';
			messageDiv.textContent = '';
		}
		
		function showError(inputId, message) {
			const input = document.getElementById(inputId);
			const errorDiv = document.getElementById(`${inputId}-error`);
			
			input.classList.add('error');
			errorDiv.textContent = message;
			errorDiv.classList.add('show');
		}
		
		function clearErrors(formType) {
			const inputs = document.querySelectorAll(`#${formType}-form .form-input`);
			inputs.forEach(input => {
				input.classList.remove('error');
			});
			
			const errors = document.querySelectorAll(`#${formType}-form .error-message`);
			errors.forEach(error => {
				error.classList.remove('show');
				error.textContent = '';
			});
		}
		
		function isValidEmail(email) {
			const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			return re.test(email);
		}
	</script>
</body>
</html>